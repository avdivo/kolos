Обработка входящего сигнала

    Анализ сингала

?       1. Ввод цифры 1 (отрицательная реакция).

            a. добавить точку и связь к отрицательной реакции
            (От какой точки? К какой точке? Если нет отрицательной создать ее?
            Если она есть создать новую? Какой вес новой связи?)
            b. уменьшить вес связи, которая была создана в процессе ответа до 1
            (какой именно связи, от какой точки к какой? Как их найти?)
            c. удалить путь.

?       2. Ввод цифры 2 (положительная реакция).

            a. добавить точку и связь к положительной реакции
            (От какой точки? К какой точке? Если нет отрицательной создать ее?
            Если она есть создать новую? Какой вес новой связи?)
            b. удалить путь.

?       3. Ввод пустой строки.

            1. Путь есть что делать? Выполнить действие 2?
            2. Пути нет, что делать? Выполнить прошивку?

        4. Ввод строки.

        5. Выход (цифра 0).


    Ввод строки

        1. Разделение строки на символы.

            1. Приходит буква x = 'n'.
            2. Находим наибольший сигнал из всех точек, пусть это Max. Если точек нет, то Max = 1.
            3. Создаем точку типа 'OUT' с именем 'n' или обновляем ее сигнал x.signal = Max + 1.
            4. От предыдущей точки (Max) к текущей (x) создаем связь с весом равным сигналу текущей точки.
            5. Для всех букв повторяем п. 3, 4.

        2. Находим точку типа 'REACT' с именем 'NEUTRAL'. Или находим ее. Задаем ее вес x.signal + 1.
        3. Создается связь от последней точки (x) к 'NEUTRAL' с весом x.signal + 1.
?       4. Очищаем путь.

        5. Запускаем функцию Прошивка.

        6. Запускаем функцию Действие.


        Прошивка


?           0. Если путь существует:
                1. Если 2 действие в пути это реакция - удалить путь.
                2. Планируем действие 2.
                3. Переход к Действию.

            1. Среди всех точек находим точку с максимальным сигналом Start.
            2. Добавляем Start в список.
            3. Находим связь с максимальным весом от точки Start к точке, пускай Current.
            4. Определяем вес связи по которой будем искать следующую точку next_weigh.

            5. Находим исходящую связь от Start с весом next_weigh.
            6. Если связи с весом next_weigh нет - прекращаем поиск. Планируем действие 2. Переход к Действию.
            7. Если связь найдена, находим точку, к которой она ведет Next.
            8. Добавляем Next в список.
            9. Если это точка реакции - Next.type = 'REACT' - прекращаем поиск:
                1. Если добавлена отрицательная реакция. Планируем действие -1.
                2. Если добавлена положительная реакция. Планируем действие 2.
                3. Если добавлена нейтральная реакция. Планируем действие 2.
                4. Переход к Действию.
            10. Переходим к пункту 5.


?       Действие (запускается после прошивки)

            1. Если в пути 1 объект - очистить путь.
            2. Если путь пустой - выйти.
            3. Действие -1: сообщить "Была найдена отрицательная реакция."
            4. Действие 2: вывести название второй точки в пути (Two).
            5. Найти точку с максимальным сигналом (Max).
            6. Увеличить сигнал Two.signal = Two.signal + 1.
            7. Создать связь от Max к Two с весом Two.signa.




