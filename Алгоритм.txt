Обработка входящего сигнала

    Анализ сингала

?       1. Ввод цифры 1 (отрицательная реакция).

            a. добавить точку и связь к отрицательной реакции
            (От какой точки? К какой точке? Если нет отрицательной создать ее?
            Если она есть создать новую? Какой вес новой связи?)
            b. уменьшить вес связи, которая была создана в процессе ответа до 1
            (какой именно связи, от какой точки к какой? Как их найти?)
            c. удалить путь.

?       2. Ввод цифры 2 (положительная реакция).

            a. добавить точку и связь к положительной реакции
            (От какой точки? К какой точке? Если нет отрицательной создать ее?
            Если она есть создать новую? Какой вес новой связи?)
            b. удалить путь.

?       3. Ввод пустой строки.

            1. Путь есть что делать? Выполнить действие 2?
            2. Пути нет, что делать? Выполнить прошивку?

        4. Ввод строки.

        5. Выход (цифра 0).
?           Обнуление сигналов всех точек перед выходом из программы

        6. Определение реакции.

        7. Если нет реакции выполнить Прошивку.

        8. Определение реакции.

        9. Если есть реакция выполнить Действие.


    Определение реакции

        1. Если путь существует:
            1. Если в пути 1 действие - удалить путь.
            2. Если второе действие в пути это реакция - удалить путь.
            3. Планируем реакцию 2.
            4. Переход к Действию.
        2. Если пути нет сбросить реакцию.


    Ввод строки

        1. Разделение строки на символы.

            1. Приходит буква x = 'n'.
            2. Находим наибольший сигнал из всех точек, пусть это Max. Если точек нет, то Max = 1.
            3. Создаем точку типа 'OUT' с именем 'n' или обновляем ее сигнал x.signal = Max + 1.
            4. От предыдущей точки (Max) к текущей (x) создаем связь с весом равным сигналу текущей точки.
            5. Для всех букв повторяем п. 3, 4.

        2. Находим точку типа 'REACT' с именем 'NEUTRAL'. Или находим ее. Задаем ее вес x.signal + 1.
        3. Создается связь от последней точки (x) к 'NEUTRAL' с весом x.signal + 1.
?       4. Очищаем путь.


        Прошивка

            1. Среди всех точек находим точку с максимальным сигналом Start.
            2. Добавляем Start в список.
            3. Находим связь с максимальным весом от точки Start к точке, пускай Current.
            4. Определяем вес связи по которой будем искать следующую точку next_weigh.

            5. Находим исходящую связь от Start с весом next_weigh.
            6. Если связи с весом next_weigh нет - прекращаем поиск. Планируем реакцию 2. Переход к Действию.
            7. Если связь найдена, находим точку, к которой она ведет Next.
            8. Добавляем Next в список.
?           9. Если это точка реакции - Next.type = 'REACT' - прекращаем поиск:
                1. Если добавлена отрицательная реакция. Планируем реакцию -1.
                2. Если добавлена положительная реакция. Планируем реакцию 2.
                3. Если добавлена нейтральная реакция. Планируем реакцию 2.
                4. Переход к Действию.
            10. Переходим к пункту 5.


?       Действие

            3. Реакция -1: сообщить "Была найдена отрицательная реакция."
            4. Реакция 2: вывести название второй точки в пути (Two).
            5. Найти точку с максимальным сигналом (Max).
            6. Увеличить сигнал Two.signal = Two.signal + 1.
            7. Создать связь от Max к Two с весом Two.signa.




Прошивка

1. Если Путь существует
        Очистить Путь.
2. Если список память пустой
        Выход из функции Прошивки

3. Чтение связи из списка Онлайн связи,
        Если связи нет - Выход из функции Прошивки
4. Получение id  точки, к которой ведет эта связь.
5. Если точка в списке отрицательных действий и она первая в списке Путь:
        Удалить онлайн связь
        Перейти к п.3
6. Если точка имеет тип REACT:
        Удалить онлайн связь
        Перейти к п.3

Если Точка не в списке отрицательных действий или в списке, но не первая в пути
7. Добавить связь и точку в Путь
8. Если точка в списке Отрицательных действий и при этом первая в Пути:
        Удалить онлайн связь
        Очистить список Путь
        Перейти к п.3
9. Если добавлена точка - реакция тип REACT = NEGATIVE
        Предыдущая точка добавляется в список отрицательных действий.
        Выход из функции Прошивки
10. Если добавлена точка - реакция тип REACT = POSITIVE или NEUTRAL
        Выход из функции Прошивки

Если добавлена точка не тип REACT
11. Получаем связь исходящую от точки с link_id + 1
12. Если такой связи нет
        Выход из функции Прошивки
13. Если есть - получение id  точки, к которой ведет эта связь.
14. Перейти к п. 7.
